<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <meta name="format-detection" content="telephone=no">
        <title>测试</title>
        <link rel="stylesheet" href="css/material.min.css">
        <link href="http://cdn.bootcss.com/material-design-icons/2.2.3/iconfont/material-icons.css" rel="stylesheet">
        <script src="js/material.min.js"></script>
        <link href="css/style.css" rel="stylesheet">
        <script src="js/jquery-2.2.1.min.js"></script>
        <script src="js/handlebars-v4.0.5.js"></script>
        <style>
            body{
                background-color: #D6D8DA;
            }
            .news-card{
                width: auto;
                margin:24px;
            }
            .news-card > .mdl-card__title {
                height: 200px;
                color: #fff;
                background: url('background-2.png') center / cover;
            }
            .news-card > .mdl-card__menu {
                color: #fff;
            }
            #main{
                overflow: visible;
            }
            .loading{
                text-align: center;
            }
        </style>

    </head>
    <body>
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-tabs" id="wrapper">
            <header class="mdl-layout__header" id="title">
                <div class="mdl-layout__header-row">
                    <!-- Title -->
                    <span class="mdl-layout-title">Title</span>
                </div>
                <!-- Tabs -->
                <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
                    <a href="#scroll-tab-1" class="mdl-layout__tab is-active">Tab 1</a>
                    <a href="#scroll-tab-2" class="mdl-layout__tab">Tab 2</a>
                    <a href="#scroll-tab-3" class="mdl-layout__tab">Tab 3</a>
                </div>
            </header>
            <div class="mdl-layout__drawer" id="drawer">
                
            </div>
            <main class="mdl-layout__content" id="main">
                <section class="mdl-layout__tab-panel is-active" id="scroll-tab-1">
                    <div class="page-content">
                        <div class="loading"><div class="mdl-spinner mdl-js-spinner is-active"></div></div>
                    </div>
                </section>
                <section class="mdl-layout__tab-panel" id="scroll-tab-2">
                    <div class="page-content">
                        <div class="news-card mdl-card mdl-shadow--8dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Welcome</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                Mauris sagittis pellentesque lacus eleifend lacinia...
                            </div>
                            <div class="mdl-card__actions mdl-card--border">
                                <a class="move-to mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    查看文章
                                </a>
                            </div>
                        </div>
                        <div class="news-card mdl-card mdl-shadow--8dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Welcome</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                Mauris sagittis pellentesque lacus eleifend lacinia...
                            </div>
                            <div class="mdl-card__actions mdl-card--border">
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    查看文章
                                </a>
                            </div>
                        </div>
                        <div class="news-card mdl-card mdl-shadow--8dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Welcome</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                Mauris sagittis pellentesque lacus eleifend lacinia...
                            </div>
                            <div class="mdl-card__actions mdl-card--border">
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    查看文章
                                </a>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="mdl-layout__tab-panel" id="scroll-tab-3">
                    <div class="page-content">
                        <div class="news-card mdl-card mdl-shadow--8dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Welcome</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                Mauris sagittis pellentesque lacus eleifend lacinia...
                            </div>
                            <div class="mdl-card__actions mdl-card--border">
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    查看文章
                                </a>
                            </div>
                        </div>
                        <div class="news-card mdl-card mdl-shadow--8dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Welcome</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                Mauris sagittis pellentesque lacus eleifend lacinia...
                            </div>
                            <div class="mdl-card__actions mdl-card--border">
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    查看文章
                                </a>
                            </div>
                        </div>
                        <div class="news-card mdl-card mdl-shadow--8dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Welcome</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                Mauris sagittis pellentesque lacus eleifend lacinia...
                            </div>
                            <div class="mdl-card__actions mdl-card--border">
                                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    查看文章
                                </a>
                            </div>
                        </div>
                    </div>
                </section>

            </main>

        </div>
        <script id="entry-template" type="text/x-handlebars-template">
            <div class="news-card mdl-card mdl-shadow--2dp">
                <div class="mdl-card__title" style='background-image: url("{{ImageURL}}")'>
                    <h2 class="mdl-card__title-text">{{From}}</h2>
                </div>
                <div class="mdl-card__supporting-text">
                    {{{Title}}}
                    <br>
                    <i>{{Time}}</i>
                </div>
                <div class="mdl-card__actions mdl-card--border">
                    <a class="move-to mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="news.html" data-url="{{URL}}" target="_blank">
                        查看文章
                    </a>
                </div>
            </div>
        </script>
        <script>
            function clearLocalStorage(){
                for(var i in localStorage){
                    localStorage.removeItem(i);
                }
            }
            var source = $('#entry-template').html();
            var template = Handlebars.compile(source);
            var $target = $("#scroll-tab-1>.page-content");
            var url;
            var content;
            var sourceData;
            $.getJSON('test.json',function(data){
                sourceData = data;
                $.each(data,function(index,item){
                    var html = template(item);
                    $target.append(html);
                });


            });
            $(".loading>.mdl-spinner").hide();
            window.onload = function(){
                clearLocalStorage();
                $(".move-to").bind("click",function(event){
                    url = $(this).attr('data-url');
                    sourceData.forEach(function(item){
                        if(item["URL"] == url){
                            content = item;
                            console.log(item['URL']);
                            return false;
                        }
                    });
                    localStorage.setItem(url,JSON.stringify(content));
                    localStorage.setItem("key",url);
                });
            }
        </script>
    </body>
</html>

